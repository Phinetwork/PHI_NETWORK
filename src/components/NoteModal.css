
      .note-modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.6); z-index:10025; }
      .note-modal { position:fixed; inset:auto 12px 12px 12px; max-width:680px; margin:0 auto; background:#0c0f12; border:1px solid rgba(255,255,255,.08); border-radius:16px; box-shadow:0 10px 40px rgba(0,0,0,.5); z-index:10026; }
      .note-modal__header { position:relative; padding:14px 16px 6px; display:flex; flex-direction:column; gap:6px; }
      .note-modal__title { font:600 14px/1.3 Inter, system-ui, sans-serif; color:#cfeaff; display:flex; gap:8px; align-items:baseline; }
      .note-modal__beatstep { font:700 16px/1.2 ui-monospace, SFMono-Regular, Menlo, monospace; color:#aef; text-shadow:0 0 12px rgba(160,240,255,.6); }
      .note-modal__meta { display:flex; gap:10px; color:#8aa6b3; font:12px/1.4 Inter, system-ui, sans-serif; }
      .note-modal__chip { background:rgba(255,255,255,.06); padding:2px 6px; border-radius:999px; }
      .note-modal__close { position:absolute; top:8px; right:8px; background:transparent; border:0; color:#9fb; font-size:18px; line-height:1; cursor:pointer; }
      .note-modal__body { padding:6px 16px 12px; }
      .note-modal__body textarea { width:100%; background:#0a0d10; color:#e8f7ff; border:1px solid rgba(255,255,255,.08); border-radius:10px; padding:10px 12px; resize:vertical; min-height:96px; outline:none; }
      .note-modal__hints { margin-top:6px; color:#a8c5d4; font:12px/1.4 Inter, system-ui, sans-serif; }
      .note-modal__actions { display:flex; justify-content:flex-end; gap:8px; padding:0 16px 14px; }
      .btn-primary { background:linear-gradient(90deg,#8beaff,#c7f4ff); color:#001018; border:0; border-radius:10px; padding:8px 12px; font:600 14px/1 Inter; cursor:pointer; box-shadow:0 0 18px rgba(139,234,255,.35); }
      .btn-primary:disabled { opacity:.5; cursor:not-allowed; box-shadow:none; }
      .btn-secondary { background:transparent; color:#cfeaff; border:1px solid rgba(255,255,255,.12); border-radius:10px; padding:8px 12px; font:600 14px/1 Inter; cursor:pointer; }
      @media (min-width:700px){ .note-modal { inset: 12vh auto auto auto; } }
      .note-modal-backdrop {
        position: fixed;
        inset: 0;
        z-index: 10025;
        /* deep-space with star shimmer */
        background:
          radial-gradient(1200px 600px at 20% -10%, rgba(0, 234, 255, 0.10), transparent 60%),
          radial-gradient(900px 600px at 110% 110%, rgba(255, 21, 89, 0.08), transparent 60%),
          rgba(0, 0, 0, 0.66);
        overflow: hidden;
      }
      .note-modal-backdrop::before {
        /* drifting aurora veil */
        content: "";
        position: absolute; inset: -40%;
        background: conic-gradient(from 180deg at 50% 50%, rgba(139,234,255,.25), rgba(199,244,255,.05), rgba(255,21,89,.15), rgba(139,234,255,.25));
        filter: blur(50px) saturate(120%);
        animation: aurora 26s linear infinite;
        pointer-events: none;
        opacity: .55;
      }
      .note-modal-backdrop::after {
        /* starfield twinkle */
        content: "";
        position: absolute; inset: 0;
        background-image:
          radial-gradient(1px 1px at 20% 30%, rgba(255,255,255,.35) 50%, transparent 51%),
          radial-gradient(1px 1px at 80% 70%, rgba(255,255,255,.22) 50%, transparent 51%),
          radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.18) 50%, transparent 51%),
          radial-gradient(1px 1px at 60% 20%, rgba(255,255,255,.28) 50%, transparent 51%);
        animation: twinkle 5.236s ease-in-out infinite;
        pointer-events: none;
        opacity: .65;
      }
      
      .note-modal {
        position: fixed;
        inset: auto 12px 12px 12px;
        max-width: 680px;
        margin: 0 auto;
        z-index: 10026;
        background: linear-gradient(180deg, rgba(12,15,18,.9) 0%, rgba(8,10,13,.92) 100%);
        border: 1px solid rgba(255,255,255,.08);
        border-radius: 16px;
        box-shadow:
          0 10px 40px rgba(0,0,0,.55),
          inset 0 0 0 1px rgba(255,255,255,.03);
        backdrop-filter: blur(6px) saturate(110%);
        overflow: hidden;
      }
      .note-modal::before {
        /* animated neon border */
        content: "";
        position: absolute; inset: 0;
        border-radius: inherit;
        padding: 1px;
        background: linear-gradient(90deg, #8beaff, #c7f4ff, #ff1559, #8beaff);
        -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
        -webkit-mask-composite: xor; mask-composite: exclude;
        animation: borderflow 8.472s linear infinite;
        opacity: .55;
        pointer-events: none;
      }
      
      .note-modal__header { position:relative; padding:14px 16px 6px; display:flex; flex-direction:column; gap:6px; }
      .note-modal__title { font:600 14px/1.3 Inter, system-ui, sans-serif; color:#cfeaff; display:flex; gap:8px; align-items:baseline; }
      .note-modal__beatstep { font:700 16px/1.2 ui-monospace, SFMono-Regular, Menlo, monospace; color:#aef; text-shadow:0 0 14px rgba(160,240,255,.6); }
      .note-modal__meta { display:flex; gap:10px; color:#8aa6b3; font:12px/1.4 Inter, system-ui, sans-serif; }
      .note-modal__chip { background:rgba(255,255,255,.06); padding:2px 6px; border-radius:999px; border:1px solid rgba(255,255,255,.08); }
      
      .note-modal__close {
        position:absolute; top:8px; right:8px;
        background:transparent; border:0; color:#cfeaff;
        font-size:18px; line-height:1; cursor:pointer;
        border-radius:10px; padding:4px 8px;
      }
      .note-modal__close:hover { background:rgba(255,255,255,.06); }
      
      .note-modal__body { padding:6px 16px 12px; }
      .note-modal__body textarea {
        width:100%;
        background:#0a0d10;
        color:#e8f7ff;
        border:1px solid rgba(255,255,255,.10);
        border-radius:12px;
        padding:12px 14px;
        resize:vertical; min-height:112px; outline:none;
        box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
      }
      .note-modal__body textarea:focus {
        border-color: rgba(139,234,255,.65);
        box-shadow: 0 0 0 3px rgba(139,234,255,.18), inset 0 0 0 1px rgba(139,234,255,.2);
      }
      
      .note-modal__hints { margin-top:8px; color:#a8c5d4; font:12px/1.4 Inter, system-ui, sans-serif; }
      
      .note-modal__actions { display:flex; justify-content:flex-end; gap:8px; padding:0 16px 16px; }
      
      .btn-primary {
        background: linear-gradient(90deg,#8beaff,#c7f4ff);
        color:#001018; border:0; border-radius:12px; padding:10px 14px;
        font:600 14px/1 Inter; cursor:pointer;
        box-shadow:0 0 18px rgba(139,234,255,.35), 0 4px 18px rgba(0,0,0,.35);
        transition: transform .12s ease, box-shadow .12s ease, filter .12s ease;
      }
      .btn-primary:hover { transform: translateY(-1px); filter: brightness(1.03); }
      .btn-primary:disabled { opacity:.55; cursor:not-allowed; box-shadow:none; }
      
      .btn-secondary {
        background:transparent; color:#cfeaff;
        border:1px solid rgba(255,255,255,.16); border-radius:12px;
        padding:10px 14px; font:600 14px/1 Inter; cursor:pointer;
        transition: background .12s ease, border-color .12s ease;
      }
      .btn-secondary:hover { background:rgba(255,255,255,.06); border-color:rgba(255,255,255,.28); }

      .btn-ghost {
        background: rgba(255,255,255,.04);
        color: #cfeaff;
        border: 1px solid rgba(255,255,255,.12);
        border-radius: 12px;
        padding: 10px 14px;
        font: 600 14px/1 Inter;
        cursor: pointer;
        transition: background .12s ease, border-color .12s ease, transform .12s ease;
      }
      .btn-ghost:hover { background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.22); }
      .btn-ghost:active { transform: translateY(1px); }
      
      @media (min-width:700px){
        .note-modal { inset: 12vh auto auto auto; }
      }
      
      /* ── Atlantean shimmer ───────────────────────────────────────── */
      @keyframes aurora {
        0% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.05); }
        100% { transform: rotate(360deg) scale(1); }
      }
      @keyframes twinkle {
        0%, 100% { opacity: .65; }
        50% { opacity: .9; }
      }
      @keyframes borderflow {
        0% { filter: hue-rotate(0deg); }
        100% { filter: hue-rotate(360deg); }
      }
      /* make the close icon strokes super crisp */
.note-modal__closeIcon line {
    stroke-linecap: round;
    vector-effect: non-scaling-stroke;
  }
  
  /* hint the compositor that “bottom” will animate when keyboard appears */
  .note-modal { 
    will-change: bottom;
    transform: translateZ(0); /* prevents subpixel shimmer during lift */
  }
  
  /* if you want to use a CSS variable instead of inline bottom, keep this ready */
  @supports (height: 100dvh) {
    .note-modal {
      /* use by setting style={{ "--kb-inset": `${kbInset}px` } as React.CSSProperties } */
      bottom: max(12px, var(--kb-inset, 0px));
    }
  }

  .note-modal {
    display: flex;
    flex-direction: column;
    max-height: min(88vh, calc(100dvh - 24px));
  }

  .note-modal__controls {
    display: flex;
    gap: 8px;
    align-items: center;
  }

  .note-modal__expand,
  .note-modal__pin {
    background: rgba(255, 255, 255, 0.08);
    border: 1px solid rgba(255, 255, 255, 0.14);
    color: #e6f9ff;
    border-radius: 10px;
    font: 600 12px/1 Inter, system-ui, sans-serif;
    padding: 4px 8px;
    cursor: pointer;
    transition: background 0.15s ease, transform 0.15s ease, border-color 0.15s ease;
  }
  .note-modal__expand:hover,
  .note-modal__pin:hover { background: rgba(255, 255, 255, 0.12); }
  .note-modal__pin.is-active {
    border-color: rgba(139,234,255,0.8);
    box-shadow: 0 0 12px rgba(139,234,255,0.3);
  }

  .note-modal__toolbar {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 16px 4px;
    border-top: 1px solid rgba(255,255,255,0.05);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    background: rgba(9, 12, 15, 0.7);
    backdrop-filter: blur(6px);
  }
  .tool-btn {
    all: unset;
    cursor: pointer;
    padding: 6px 8px;
    border-radius: 8px;
    color: #dff7ff;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.08);
    font: 600 12px/1 Inter, system-ui, sans-serif;
    transition: background 0.15s ease, border-color 0.15s ease, transform 0.15s ease;
  }
  .tool-btn:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.16); }
  .tool-btn:active { transform: translateY(1px); }
  .tool-sep { width: 1px; height: 20px; background: rgba(255,255,255,0.08); }
  .tool-stats {
    margin-left: auto;
    display: flex;
    gap: 10px;
    font: 600 11px/1 Inter, system-ui, sans-serif;
    color: #9ec1d1;
  }

  .note-modal__meta-grid {
    display: grid;
    gap: 10px;
    padding: 12px 16px 6px;
    grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  }
  .note-modal__label {
    display: flex;
    flex-direction: column;
    gap: 6px;
    font: 600 11px/1 Inter, system-ui, sans-serif;
    letter-spacing: 0.02em;
    color: #a8c5d4;
    text-transform: uppercase;
  }
  .note-modal__input {
    width: 100%;
    background: rgba(7, 10, 12, 0.7);
    color: #eaf8ff;
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 10px;
    padding: 8px 10px;
    font: 500 13px/1.2 Inter, system-ui, sans-serif;
    outline: none;
  }
  .note-modal__input:focus {
    border-color: rgba(139,234,255,.65);
    box-shadow: 0 0 0 2px rgba(139,234,255,.16);
  }
  .note-modal__select { appearance: none; }

  .note-modal__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 2px 16px 10px;
  }
  .note-modal__tag {
    font: 600 11px/1 Inter, system-ui, sans-serif;
    color: #d9f6ff;
    background: rgba(139,234,255,0.12);
    border: 1px solid rgba(139,234,255,0.25);
    border-radius: 999px;
    padding: 3px 8px;
  }

  .note-modal__field {
    padding: 0 16px 6px;
  }
  .note-modal__field--doc textarea {
    min-height: 260px;
  }
  .note-modal__field textarea {
    width: 100%;
    background: #0a0d10;
    color: #e8f7ff;
    border: 1px solid rgba(255,255,255,.10);
    border-radius: 12px;
    padding: 12px 14px;
    resize: vertical;
    min-height: 140px;
    outline: none;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
  }
  .note-modal__resize {
    height: 6px;
    margin: 4px auto 0;
    width: 96px;
    border-radius: 999px;
    background: rgba(255,255,255,0.12);
    cursor: ns-resize;
  }
  
